<div class="container" th:fragment="content">

	<br /> <br /> <br /> <br /> <br />

	<h2>Fiche d'un contact</h2>

	<br /> <br />

	<form action="#" method="post" th:action="@{/enregistrer-contact}"
		th:object="${template}">

		<input type="text" th:value="${idcontact}" name="idcontact" /> <br />
		<table>
			<th:block th:each="c, stat :*{champs}">
				<tr>
					<td th:text="${c.libelle}"></td>

					<td>
						<div
							th:if="*{champs[__${stat.index}__].datatype.libelle} == 'EMAIL'"
							class="input-group">
							
							<span class="input-group-addon">@</span> <input type="email"
								class="form-control" id="inputEmail" placeholder="Adresse email"
								th:field="*{champs[__${stat.index}__].donnee.valeur}" />
								
						</div>

						<div>
							<select 
								th:if="*{champs[__${stat.index}__].preselectionsize} gt 0"
								th:field="*{champs[__${stat.index}__].donnee.valeur}">
								
								<option th:each="d : *{champs[__${stat.index}__].preselection}"
									th:value="${d}" th:text="${d}"/>
																		
							</select>
						</div>

						<div th:if="*{champs[__${stat.index}__].preselectionsize} == 0">

							<div
								th:if="*{champs[__${stat.index}__].datatype.libelle} == 'DATE'"
								class="input-group">
								
								<input type="date" class="form-control" id="inputDate"
									placeholder="Date"
									th:field="*{champs[__${stat.index}__].donnee.valeur}" />
							</div>

							<div th:if="*{champs[__${stat.index}__].datatype.regex} == ''"
								class="input-group">
								
								<!-- <span>sans regex</span>  -->
								
								<input type="text" class="form-control"
									th:if="*{champs[__${stat.index}__].datatype.libelle} == 'TEXTE' "
									th:field="*{champs[__${stat.index}__].donnee.valeur}" />
								
								<input
									type="text" class="form-control"
									th:if="*{champs[__${stat.index}__].datatype.libelle} == 'ENTIER' "
									th:field="*{champs[__${stat.index}__].donnee.valeur}" />
									
								<input
									type="text" class="form-control"
									th:if="*{champs[__${stat.index}__].datatype.libelle} == 'DECIMAL' "
									th:field="*{champs[__${stat.index}__].donnee.valeur}" />
							</div>

							<div th:if="*{champs[__${stat.index}__].datatype.regex} != ''"
								class="input-group">
								<!-- <span>avec regex</span> -->
								
								<input type="text" class="form-control"
									th:if="*{champs[__${stat.index}__].datatype.libelle} == 'TEXTE' "
									th:field="*{champs[__${stat.index}__].donnee.valeur}"
									th:pattern="*{champs[__${stat.index}__].datatype.regex}" />
									
								<input
									type="text" class="form-control"
									th:if="*{champs[__${stat.index}__].datatype.libelle} == 'ENTIER' "
									th:field="*{champs[__${stat.index}__].donnee.valeur}"
									th:pattern="*{champs[__${stat.index}__].datatype.regex}" />
									
								<input
									type="text" class="form-control"
									th:if="*{champs[__${stat.index}__].datatype.libelle} == 'DECIMAL' "
									th:field="*{champs[__${stat.index}__].donnee.valeur}"
									th:pattern="*{champs[__${stat.index}__].datatype.regex}" />
									
							</div>
						</div>
					</td>


					<td><input type="hidden"
						th:field="*{champs[__${stat.index}__].idchamp}" /></td>
						
				<!-- 	<td><input type="text"
						th:field="*{champs[__${stat.index}__].iddatatype}" /></td>
						<td><input type="text"
							th:field="*{champs[__${stat.index}__].datatype.libelle}" /></td>
						<td><input type="text"
						th:field="*{champs[__${stat.index}__].datatype.regex}" /></td>
				-->

					<td><input type="hidden"
						th:field="*{champs[__${stat.index}__].libelle}" /></td>
						
					<td><input type="hidden"
						th:field="*{champs[__${stat.index}__].multivaleur}" /></td>
	
				</tr>
			</th:block>
		</table>
		<br /> <br /> <input type="submit" value="Enregistrer" />
	</form>
</div>